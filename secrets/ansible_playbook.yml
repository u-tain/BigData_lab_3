- name: ansible
  hosts: localhost
  become: yes

  vars:
    my_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38343637333031306231343035366332343362663631633534633638653665393832653633323234
          3264613062393630663564343463393162643538343966320a623931633264356437363236333231
          35623830666138616537623563633239366365656433376136633666646262393336646439333132
          3438646239303335380a663536363839366661373466613536663562373833336262666439373531
          3866

    my_user: utain
    my_host: 172.25.0.2
  tasks:
    - name: create file with secrets
      copy:
        dest: "/app/secrets/secrets.yml"
        content: |
          pass = {{ my_password }}
          user = {{ my_user }}
          my_host = {{ my_host }}

